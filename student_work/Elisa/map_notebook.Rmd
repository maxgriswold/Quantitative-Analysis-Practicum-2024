---
title: "Mining Project Map"
output: html_notebook
---
What does this look like on a map?
```{r mapping projects}
library(leaflet)

#Generate separate variables for lat and long for the mining dataset (current format is (lat, long))
library(tidyr)
mining <- separate(mining, col = Mine.Location, into = c("Latitude", "Longitude"), sep = ", ", remove = FALSE)

# Remove parentheses from latitude and longitude columns
mining$Latitude <- gsub("\\(", "", mining$Latitude)
mining$Longitude <- gsub("\\)", "", mining$Longitude)

# Convert latitude and longitude columns to numeric
mining$Latitude <- as.numeric(mining$Latitude)
mining$Longitude <- as.numeric(mining$Longitude)

#change lat and long to lower case
names(mining)[which(names(mining) == "Latitude")] <- "latitude"
names(mining)[which(names(mining) == "Longitude")] <- "longitude"

# Filter mining_data to include only rows with complete latitude and longitude information
mining_complete <- mining[complete.cases(mining$latitude, mining$longitude), ]


# Define color palette for commodity types
color_palette <- colorFactor(palette = c("blue", "green", "red", "orange", "purple", "yellow"),
                              domain = mining_complete$Commodity)

# Create a leaflet map
map <- leaflet(data = mining_complete) %>%
  
  # Add tiles for the base map
  addTiles() %>%
  
  # Add circles for each mine location with color based on commodity type
  addCircleMarkers(
    lng = ~longitude,  # Specify longitude column
    lat = ~latitude,   # Specify latitude column
    radius = 5,        # Set the radius of the circles
    color = ~color_palette(Commodity),  # Set the color based on commodity type
    fillOpacity = 0.05,  # Set the opacity of the circles
    popup = ~Commodity  # Add a popup with commodity type
  )


# Print the map
map
```
